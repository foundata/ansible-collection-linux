# Uninstall: Manage basic resource removal, such as packages or service users.

---

- name: "Setup | Uninstall | Remove packages"
  ansible.builtin.package:
    name: "{{ __sysctl_linux_packages_uninstall }}"
    state: "absent"
  when:
    - __sysctl_linux_packages_uninstall is defined
    - (__sysctl_linux_packages_uninstall | ansible.builtin.length) > 0


- name: "Setup | Uninstall | Remove managed drop-in sysctl config file(s) (if any)"
  ansible.builtin.file:
    path: "{{ item }}"
    state: "absent"
  loop:
    - "{{ __sysctl_linux_config_dropin_file_path }}"
    - "{{ __sysctl_linux_config_dropin_file_path_default }}"
  notify:
    - "sysctl_linux: reload"
